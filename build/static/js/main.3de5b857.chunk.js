(this.webpackJsonpbackend=this.webpackJsonpbackend||[]).push([[0],{47:function(e,t){t.URI="https://dashboard.heroku.com/apps/pacific-lowlands-63185"},58:function(e,t,a){e.exports=a(73)},63:function(e,t,a){},68:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(26),c=a.n(s),l=a(49),o=(a(63),a(10)),u=a.n(o),i=a(17),m=a(6),d=a(9),p=a(31),f=a(53),g=a(8),h=a(22),v=a(21),b=a(43),E=a(11),j=function e(t){return r.a.createElement(b.a,{defaultActiveKey:"1",className:"justify-content-md-center"},r.a.createElement(h.a,{className:"text-center",bg:t.item.done?"secondary":null,border:"info"},r.a.createElement(h.a.Header,null,r.a.createElement(b.a.Toggle,{as:g.a,variant:"button",eventKey:"0"},t.item.done?"DONE  ":null,t.item.title)),r.a.createElement(b.a.Collapse,{eventKey:"0"},t.item?r.a.createElement(h.a.Body,null,r.a.createElement(h.a.Text,null,t.item.description),r.a.createElement(E.a,{className:"my-3"},r.a.createElement(E.a.Check,{type:"checkbox",label:"done",size:"lg",checked:e.done,onChange:function(){return t.checkedHandler(e)}})),r.a.createElement(v.a,{className:"d-flex justify-content-around"},r.a.createElement(g.a,{className:"mx-2",variant:"primary",onClick:function(){return t.onModal(e)}},"Update"),r.a.createElement(g.a,{className:"mx-2",variant:"danger",onClick:t.onDelete},"Delete"))):null)))},y=a(18),x=function(e){return r.a.createElement(y.a,{show:e.show,onHide:e.modalHandler,size:"md"},r.a.createElement(y.a.Header,{closeButton:!0},r.a.createElement(y.a.Title,null,e.modalTitle)),r.a.createElement(E.a,{onSubmit:function(t){var a;t.preventDefault(),e.modalHandler(),a=e.item?{_id:e.item._id,title:t.target.title.value,description:t.target.description.value}:{title:t.target.title.value,description:t.target.description.value},e.onSubmit(a)}},r.a.createElement(y.a.Body,null,r.a.createElement(E.a.Group,null,r.a.createElement(E.a.Label,null,"Title"),r.a.createElement(E.a.Control,{type:"text",placeholder:"Enter a Title",defaultValue:e.item?e.item.title:"",name:"title"})),r.a.createElement(E.a.Group,null,r.a.createElement(E.a.Label,null,"Description"),r.a.createElement(E.a.Control,{as:"textarea",placeholder:"Enter a description",defaultValue:e.item?e.item.description:"",name:"description"}))),r.a.createElement(y.a.Footer,null,r.a.createElement(g.a,{variant:"secondary",onClick:e.modalHandler},"Close"),r.a.createElement(g.a,{type:"submit",variant:"primary"},"Save"))))},O=a(28),k=a(47).URI,S=function(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),s=a[0],c=a[1],l=Object(n.useState)(null),o=Object(m.a)(l,2),d=o[0],b=o[1],E=Object(n.useState)(null),y=Object(m.a)(E,2),S=(y[0],y[1]),w=Object(n.useState)(null),N=Object(m.a)(w,2),C=N[0],I=N[1],T=Object(n.useState)({message:null,variant:null}),D=Object(m.a)(T,2),A=D[0],B=D[1];Object(n.useEffect)((function(){b(localStorage.getItem("token")),S(localStorage.getItem("userId")),e.item.items.map((function(e){return console.log(e)}))}),[]);var L=function(e){c(!0!==s),e&&I(e)},H=function(){var t=Object(i.a)(u.a.mark((function t(a){var n,r,s,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(L(),t.prev=1,console.log(a),!a._id){t.next=19;break}return t.next=6,fetch(k+"/todo/item",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+d},body:JSON.stringify(a)});case 6:if(200===(n=t.sent).status||201===n.status){t.next=13;break}return t.next=10,n.json();case 10:return r=t.sent,B({message:r.message,variant:"danger"}),t.abrupt("return",r);case 13:return e.fetchItems(),t.next=16,n.json();case 16:return t.abrupt("return",t.sent);case 19:return t.next=21,fetch(k+"/todo/"+e.item._id,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+d},body:JSON.stringify(a)});case 21:if(200===(s=t.sent).status||201===s.status){t.next=28;break}return t.next=25,s.json();case 25:return c=t.sent,B({message:c.message,variant:"danger"}),t.abrupt("return",c);case 28:return e.fetchItems(),t.next=31,s.json();case 31:return t.abrupt("return",t.sent);case 32:t.next=37;break;case 34:t.prev=34,t.t0=t.catch(1),console.log(t.t0);case 37:case"end":return t.stop()}}),t,null,[[1,34]])})));return function(e){return t.apply(this,arguments)}}(),P=function(){var t=Object(i.a)(u.a.mark((function t(a){var n,r,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=!a.done,t.next=4,fetch(k+"/todo/item",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+d},body:JSON.stringify(Object(f.a)(Object(f.a)({},a),{},{done:n}))});case 4:if(200===(r=t.sent).status||201===r.status){t.next=11;break}return t.next=8,r.json();case 8:return s=t.sent,B({message:s.message,variant:"danger"}),t.abrupt("return",s);case 11:return e.fetchItems(),t.next=14,r.json();case 14:return t.abrupt("return",t.sent);case 17:t.prev=17,t.t0=t.catch(0);case 19:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),z=function(){var t=Object(i.a)(u.a.mark((function t(a){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(k+"/todo/item/"+a,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+d}});case 3:if(200===(n=t.sent).status||201===n.status){t.next=11;break}return t.next=7,n.json();case 7:return r=t.sent,console.log(r.message),B({message:r.message,variant:"danger"}),t.abrupt("return",r);case 11:return e.fetchItems(),t.abrupt("return",n.json());case 15:t.prev=15,t.t0=t.catch(0);case 17:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}(),U=function(){var t=Object(i.a)(u.a.mark((function t(a){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(k+"/todo/list/"+a,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+d}});case 3:if(200===(n=t.sent).status||201===n.status){t.next=11;break}return t.next=7,n.json();case 7:return r=t.sent,console.log(r.message),B({message:r.message,variant:"danger"}),t.abrupt("return",r);case 11:return e.fetchItems(),t.abrupt("return",n.json());case 15:t.prev=15,t.t0=t.catch(0);case 17:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(p.a,null,r.a.createElement(O.a,{variant:A.variant,show:!!A.message},A.message),r.a.createElement(h.a,{className:"text-center m-3"},r.a.createElement(h.a.Header,null,e.item.title),r.a.createElement(h.a.Body,null,0!==e.item.items.length?e.item.items.map((function(e){return r.a.createElement(j,{item:e,onModal:function(){return L(e)},key:e._id,checkedHandler:function(){return P(e)},onDelete:function(){return z(e._id)}})})):null),r.a.createElement(h.a.Footer,null,r.a.createElement(v.a,{className:"d-flex justify-content-around"},r.a.createElement(g.a,{variant:"info",className:"mx-3",onClick:L},"Add Item"),r.a.createElement(g.a,{variant:"danger",className:"mx-3",onClick:function(){return U(e.item._id)}},"Delete List")))),r.a.createElement(x,{show:s,modalHandler:L,modalTitle:"Add Todo Item",onSubmit:H,item:C}))},w=a(24),N=a(27),C=a(56),I=a(50),T=a(40),D=function(e){return r.a.createElement(y.a,{show:e.showModal,onHide:e.onToggle},e.policy?r.a.createElement(y.a.Header,null,"Privacy Policy"):r.a.createElement(y.a.Header,{closeButton:!0},"Privacy Policy"),r.a.createElement(y.a.Body,null,r.a.createElement("p",null,"* Mejladressen och l\xf6senord sparas f\xf6r att m\xf6jligg\xf6ra login funktionaliteten. Dvs som login credentials. "),r.a.createElement("p",null,"* B\xe5de todolistor och todoitems l\xe4ggs till av anv\xe4ndaren och sparas i databasen s\xe5 att anv\xe4ndaren har sina todolistor och items p\xe5 sitt konto, \xe4ven n\xe4sta g\xe5ng hen anv\xe4nder appen. "),r.a.createElement("p",null,"* Datan som samlas in f\xe5s via formul\xe4r som anv\xe4ndaren fyller i, den s\xe4ljs inte."),r.a.createElement("p",null,"* Ens data kan tas bort genom att trycka p\xe5 \u201cdelete user\u201d efter att ha fyllt i mejl och l\xf6senord p\xe5 login sk\xe4rmen.")),e.policy?r.a.createElement(y.a.Footer,null,r.a.createElement(v.a,{className:"d-flex justify-content-around"},r.a.createElement(g.a,{className:"mx-2",variant:"secondary",onClick:function(){e.policy(!0,e.email,e.password,e.admin)}},"Ok"),r.a.createElement(g.a,{className:"mx-2",variant:"danger",onClick:function(){e.policy(!1)}},"Decline"))):null)},A=a(47).URI,B=function(e){var t=Object(n.useState)(null),a=Object(m.a)(t,2),s=a[0],c=a[1],l=Object(n.useState)(null),o=Object(m.a)(l,2),d=o[0],f=o[1],h=Object(n.useState)(null),b=Object(m.a)(h,2),E=b[0],j=b[1],y=Object(n.useState)(),x=Object(m.a)(y,2),k=x[0],B=x[1],L=Object(n.useState)(!0),H=Object(m.a)(L,2),P=H[0],z=H[1],U=Object(n.useState)(null),M=Object(m.a)(U,2),J=M[0],_=M[1],G=Object(n.useState)(!0),R=Object(m.a)(G,2),F=R[0],K=R[1],V=Object(n.useState)(!1),$=Object(m.a)(V,2),q=$[0],Q=$[1],W=Object(n.useState)({message:null,variant:null}),X=Object(m.a)(W,2),Y=X[0],Z=X[1];Object(n.useEffect)((function(){B(localStorage.getItem("token")),f(localStorage.getItem("user")),j(localStorage.getItem("userId")),ee()}),[k]);var ee=function(){var e=Object(i.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k||!d){e.next=15;break}return e.prev=1,e.next=4,fetch(A+"/todo",{headers:{"Content-Type":"application/json",Authorization:"Bearer "+k}});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,c(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),ae(e.t0);case 14:z(!1);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),te=function(){Q((function(e){return!e}))},ae=function(e){Z(e)},ne=function(){var e=Object(i.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(A+"/todo",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+k},body:JSON.stringify({title:J,userId:E})});case 2:if(200===(t=e.sent).status||201===t.status){e.next=9;break}return e.next=6,t.json();case 6:return a=e.sent,Z({message:a.message,variant:"danger"}),e.abrupt("return",a);case 9:return ee(),e.next=12,t.json();case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return P?r.a.createElement(p.a,{className:"text-center m-5"},r.a.createElement(C.a,{animation:"border",variant:"secondary",size:"lg"})):r.a.createElement(p.a,{className:"justify-content-center"},r.a.createElement(O.a,{className:"m-5",show:F,variant:"success"},r.a.createElement(O.a.Heading,null,"Cookie Consent"),r.a.createElement("p",null,"Token sparas f\xf6r att kunna h\xe5lla anv\xe4ndaren inloggad. Anv\xe4ndar ID samt mejladress sparas f\xf6r att kunna personalisera anv\xe4ndarupplevelsen genom att visa mejladressen p\xe5 anv\xe4ndaren samt anv\xe4ndarens egna todo listor"),r.a.createElement("hr",null),r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement(g.a,{onClick:function(){return K(!1)},variant:"outline-success"},"Consent"))),r.a.createElement(w.a,{className:"justify-content-around align-content-center"},r.a.createElement("h1",{className:"text-center mt-4"},"Hi ",d,", these are your Todo Items")),r.a.createElement(w.a,{className:" align-content-center justify-content-center"},r.a.createElement(v.a,{className:"d-flex"},r.a.createElement(g.a,{variant:"danger",className:"m-3",size:"sm",onClick:e.onLogout},"Logout"),r.a.createElement(g.a,{variant:"secondary",className:"m-3",size:"sm",onClick:te}," Show Policy"))),r.a.createElement(w.a,{className:"justify-content-center"},r.a.createElement(O.a,{variant:Y.variant,show:!!Y.message},Y.message)),r.a.createElement(w.a,{className:"justify-content-center mt-3"},r.a.createElement(N.a,{xs:8},"  ",r.a.createElement(I.a,{className:"mb-3"},r.a.createElement(T.a,{onChange:function(e){_(e.target.value)},placeholder:"List Title","aria-label":"list Title"}),r.a.createElement(I.a.Append,null,r.a.createElement(g.a,{onClick:ne,variant:"outline-secondary"},"Add List"))))),0!==s.items.length?s.items.map((function(e){return r.a.createElement(w.a,{className:"justify-content-center",key:e._id},r.a.createElement(N.a,{xs:8},r.a.createElement(S,{item:e,fetchItems:ee})))})):null,r.a.createElement(w.a,{className:"justify-content-center mt-3"},r.a.createElement(N.a,{xs:8})),r.a.createElement(D,{showModal:q,onToggle:te}))},L=function(e){var t=Object(n.useState)(null),a=Object(m.a)(t,2),s=a[0],c=a[1],l=Object(n.useState)(null),o=Object(m.a)(l,2),u=o[0],i=o[1],d=Object(n.useState)(!1),f=Object(m.a)(d,2),h=f[0],b=f[1];return r.a.createElement(p.a,null,r.a.createElement("h1",{className:"text-center mt-4"},"Login/Register"),r.a.createElement(w.a,{className:"justify-content-md-center"},r.a.createElement(N.a,{xs:6},r.a.createElement(O.a,{variant:e.error.variant,show:e.showAlert},e.error.message),r.a.createElement(E.a,null,r.a.createElement(E.a.Group,null,r.a.createElement(E.a.Label,null,"Email"),r.a.createElement(E.a.Control,{type:"email",name:"email",onChange:function(e){c(e.target.value)}})),r.a.createElement(E.a.Group,null,r.a.createElement(E.a.Label,null,"Password"),r.a.createElement(E.a.Control,{type:"password",name:"password",onChange:function(e){i(e.target.value)}})),r.a.createElement(E.a.Group,null,r.a.createElement(E.a.Check,{type:"checkbox",label:"Admin",name:"admin",onChange:function(e){b(e.target.checked)}})),r.a.createElement(v.a,{className:"d-flex justify-content-around"},r.a.createElement(g.a,{className:"mx-2",variant:"secondary",onClick:function(){e.onLogin(s,u)}},"Login"),r.a.createElement(g.a,{className:"mx-2",variant:"primary",onClick:e.toggleModal},"Signup")),r.a.createElement(v.a,{className:"d-flex justify-content-around"},r.a.createElement(g.a,{className:"m-2",block:!0,variant:"danger",onClick:function(){e.deleteUser(s,u)}}," Delete user"))))),r.a.createElement(D,{showModal:e.showModal,policy:e.policy,email:s,password:u,admin:h}))},H=(a(68),a(47).URI);var P=Object(d.f)((function(){var e=Object(n.useState)(null),t=Object(m.a)(e,2),a=(t[0],t[1]),s=Object(n.useState)(!1),c=Object(m.a)(s,2),l=c[0],o=c[1],p=Object(n.useState)(null),f=Object(m.a)(p,2),g=(f[0],f[1]),h=Object(n.useState)(!1),v=Object(m.a)(h,2),b=v[0],E=v[1],j=Object(n.useState)({message:null,variant:null}),y=Object(m.a)(j,2),x=y[0],O=y[1];Object(n.useEffect)((function(){k()}),[]);var k=function(){var e=localStorage.getItem("token"),t=localStorage.getItem("expiryDate");if(e&&t)if(new Date(t)<=new Date)S();else{localStorage.getItem("userId");o(!0)}},S=function(){o(!1),a(null),localStorage.removeItem("token"),localStorage.removeItem("expiryDate"),localStorage.removeItem("userId")},w=function(){var e=Object(i.a)(u.a.mark((function e(t,a,n){var r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(H+"/user/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:a,admin:n})});case 3:if(200===(r=e.sent).status||201===r.status){e.next=10;break}return e.next=7,r.json();case 7:return s=e.sent,O({message:s.message,variant:"danger"}),e.abrupt("return",s);case 10:return O({message:"User Added",variant:"success"}),console.log(r),e.next=14,r.json();case 14:return e.abrupt("return",e.sent);case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,a,n){return e.apply(this,arguments)}}(),N=function(){E((function(e){return!e}))},C=function(e,t,a,n){if(!e)return N(),O({message:"User cannot be created without accepting the privacy policy",variant:"danger"});!0===e&&(N(),w(t,a,n))},I=function(){var e=Object(i.a)(u.a.mark((function e(t,a){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(H+"/user/clear",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:a})});case 3:if(200===(n=e.sent).status||201===n.status){e.next=10;break}return e.next=7,n.json();case 7:return r=e.sent,O({message:r.message,variant:"danger"}),e.abrupt("return",r);case 10:return O({message:"All of your data has been removed",variant:"success"}),e.next=13,n.json();case 13:return e.abrupt("return",e.sent);case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,a){return e.apply(this,arguments)}}(),T=function(){var e=Object(i.a)(u.a.mark((function e(t,n){var r,s,c,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(H+"/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})});case 3:if(200===(r=e.sent).status||201===r.status){e.next=11;break}return e.next=7,r.json();case 7:return s=e.sent,console.log(s),O({message:s.message,variant:"danger"}),e.abrupt("return",s);case 11:return e.next=13,r.json();case 13:c=e.sent,a(c.token),g(c.userId),o(!0),localStorage.setItem("token",c.token),localStorage.setItem("userId",c.userId),localStorage.setItem("user",c.user.email),36e5,l=new Date((new Date).getTime()+36e5),localStorage.setItem("expiryDate",l.toISOString()),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0),console.log(e.t0);case 28:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t,a){return e.apply(this,arguments)}}(),D=r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/",exact:!0,render:function(e){return r.a.createElement(L,{deleteUser:I,policy:C,showModal:b,onLogin:T,toggleModal:N,error:x,showAlert:!!x.message})}}));return l&&(D=r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/",exact:!0,render:function(e){return r.a.createElement(B,{onLogout:S})}}))),r.a.createElement(n.Fragment,null,D)}));a(72),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(l.a,null,r.a.createElement(P,null)),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.3de5b857.chunk.js.map